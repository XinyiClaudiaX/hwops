<!DOCTYPE html>
<html lang="en">
<head>
    <title>Part View -- SIPB HWOPS</title>
    <meta charset="UTF-8">
    <style>
    td { padding: 5px; }
    .header td { border: 2px solid black; }
    .gone { border: 0; }
    </style>
</head>
<body>
    <h2>SIPB HWOPS -- Part View</h2>

    <p>Contact sipb-hwops [at] mit [dot] edu with questions and corrections.</p>

    <p>{% if user %}Signed in as {{ user }}. <a href="{{ authlink }}">Sign out?</a>{% else %}<a href="{{ authlink }}">Sign in to edit</a>{% endif %}</p>

    {% if user and not can_update %}<p>No edit permission.</p>{% endif %}

    <p>Navigation: <a href="parts.py">Back</a></p>

    <table border="1">
    <tr><td>SKU</td><td>{{ part.sku }}</td></tr>
    <tr><td>Description</td><td>{{ part.description }}</td></tr>
    <tr><td>Comments</td><td>{{ part.comments }}</td></tr>
    <tr><td>Stock</td><td>{% if inventory %}{{ inventory[0][0].new_count }}{% else %}0{% endif %}</td></tr>
    <tr><td>Last Updated</td><td>{{ part.last_updated }} by {{ part.last_updated_by }}</td></tr>
    </table>

	<p>Stock-keeping history:</p>

    <table border="1">
    <tr><td>TXID</td><td>Submitted</td><td>New Stock</td><td>Comment</td></tr>
    {% for update, delta in inventory %}
    <tr{% if loop.first %} class="header"{% endif %}>
        <td>{{ update.txid }}</td>
        <td>{{ update.submitted }} by {{ update.submitted_by }}</td>
        <td>{{ update.new_count }} ({% if delta >= 0 %}+{% endif %}{{ delta }})</td>
        <td>{{ update.comment }}</td>
    </tr>
    {% endfor %}
    <tr><td>--</td><td>--</td><td>0</td><td>initial state</td></tr>
    </table>
</body>
</html>
